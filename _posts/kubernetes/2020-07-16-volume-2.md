---
layout: post
title: kubernetes 볼륨_2
categories: [kubernetes]
tags: [kubernetes, volume]
comments: true
---


# 쿠버네티스 볼륨_2

## 퍼시스턴트 스토리지 사용

볼륨 사용 시 파드의 라이프 사이클과 별개로 데이터를 영구적으로 저장할 수 있는 방법은 퍼시스턴트 스토리지를 사용하는 것이다. 
이를 사용하는 순서는 아래와 같으며 파드를 삭제하더라도 디스크의 데이터는 남게된다.
 
 - 쿠버네티스 클러스터가 있는 동일한 영역에 퍼시스턴트 디스크를 생성한다.
 - 파드 메니페스트의 볼륨 정의에 퍼시스턴트 디스크를 지정하고 이를 마운트한다.
 
디스크가 삭제되지 않는 한 데이터는 영구적으로 저장되지만 파드의 볼륨이 실제 기반 인프라를 참조하는 것은 쿠버네티스가 추구하는 바가 아니다. 
이유는 파드 정의가 특정 클러스터에 밀접하게 연결되면 동일한 파드 정의를 다른 클러스터에서는 사용할 수 없기 때문이다.

## PersistentVolume(PV)와 PersistentVolumeClaim(PVC)
기반 스토리지 기술과 파드를 분리하면 개발자는 애플리케이션에 필요한 퍼시트턴트 스토리지를 요청할 수 있고 기반 스토리지 기술에 대해서는 신경을 쓸 필요가 없다. 
이를 위한 새로운 리소스가 PersistentVolume(이하 PV)와 PersistentVolumeClaim(이하 PVC)이다. 
개발자는 파드에 스토리지 세부사항을 기재한 볼륨을 추가하는 대신 PVC를 통해 클러스터 관리자가 만든 기반 스토리지와 PV를 바인딩하여 이용하면 된다.

